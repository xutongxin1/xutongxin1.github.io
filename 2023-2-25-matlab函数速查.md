

### rand

rand 生成均匀分布的伪随机数。分布在（0~1）之间

rand(m,n)生成m行n列的均匀分布的伪随机数

### randn

randn 生成标准正态分布的伪随机数（均值为0，方差为1）

### randi

randi（iMax）在开区间（0，iMax）生成均匀分布的伪随机整数
randi（iMax，m，n）在开区间（0，iMax）生成mXn型 随机矩阵
r = randi([iMin,iMax],m,n)在开区间（iMin，iMax）生成mXn型 随机矩阵





![image-20230226184644416](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202302261846468.png)

![image-20230226161830610](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202302261618728.png)1个

![image-20230226183423055](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202302261834126.png)2个





![image-20230228172911020](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202302281729432.png)

![image-20230228172903784](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202302281729141.png)



![image-20230301004421040](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303010044209.png)1e-5

![image-20230301131329908](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303011313957.png)更新一半,1e-6

![image-20230301153529300](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303011535349.png)全更新，后87代无任何优化

![image-20230302005505853](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303020055711.png)1e-7

![image-20230302164455701](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303021644795.png)

![image-20230306131701177](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303061317033.png)





![image-20230307221822416](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303072218506.png)UKF使用标准差，100代

![image-20230307221948869](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303072219928.png)





![image-20230308090408755](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303080904818.png)

![image-20230308090454867](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303080904921.png)











![image-20230307152026146](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303071520282.png)使用优化算法做参数整定后

![image-20230307152159280](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303071521332.png)使用原程序整定



新UKF

![image-20230310012631901](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303100126004.png)



![image-20230310012658672](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303100126741.png)

















![image-20230309134114025](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303091341237.png)







![image-20230309134318918](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303091343051.png)对应下图



![image-20230309134343874](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303091343953.png)sigma=Xk-1





![image-20230314181118643](C:/Users/xtx/AppData/Roaming/Typora/typora-user-images/image-20230314181118643.png)

排除alpha为1的可能性

2023年3月14日18:11:50

![image-20230314181256996](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303141812055.png)









正式版：

PSO 200代



![image-20230317161313258](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303172057516.png)

![image-20230317161303338](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303172057564.png)

2023年3月17日16:13:34



CSO 100代

![image-20230317205712904](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303172057082.png)



![image-20230317205731914](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303172057977.png)

2023年3月17日20.57







2023年3月20日10.17

![image-20230320101830543](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303201018703.png)

200代CSO 误差均值

![image-20230320101914066](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303201019119.png)





2023年3月20日10.23

PSO200代 误差均值

![image-20230320102349493](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303201023563.png)

![image-20230320102357959](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202303201023015.png)





2023年4月20日21.21

CSO200代 5次均值

![image-20230420212229223](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304202123184.png)

![image-20230420212238335](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304202123663.png)



8.7783e-09

历时 15649.868469 秒。







2023年4月21日16.48

PSO200代 5次均值



![image-20230420212229223](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304211650951.png)

![image-20230421164921109](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304211649290.png)

5.8421e-09

历时 9410.007642 秒。



### 论文的CSO来源

2023年4月22日13.11

CSO100代 50次均值

![image-20230420212229223](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304202123184.png)

![image-20230422131153802](C:/Users/xtx/AppData/Roaming/Typora/typora-user-images/image-20230422131153802.png)



5.2691e-09

历时 37127.129921 秒。









### 论文的PSO来源

2023年4月23日15.02

PSO200代 50次均值

![image-20230420212229223](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304231502621.png)

![image-20230423150305156](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304231503263.png)

 3.2072e-09

历时 37710.586353 秒。











2023年4月24日16.49

CSO100代（分出0.5代） 50次均值

![image-20230424180358030](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202304241803167.png)

2.5364e-08







### 论文写作捋清楚思路v0

SOC的估计本质是，跑工况，收集电压电流

使用模型求解，得出认为的SOC真实值

使用UKF求解，得出跟踪的SOC估计值

看真实值和估计值的差异



应该实验只有前9880个有效点

程序里的安时数第一行才是有效的



现在确定电池为18Ah，放电速率1C，即9A







测试时间是9980点的话，事实上的放电点是5700个

若放电速度是1C，理论上放3600秒就结束了







### 论文写作捋清楚思路v3

SOC的估计本质是，跑工况，收集电压电流

使用模型求解，得出认为的SOC真实值

使用UKF求解，得出跟踪的SOC估计值

看真实值和估计值的差异



实验有前9320个有效点

现在确定电池为5Ah，允许放电速率1C，即5A



#### HPPC测试环

5A的测试

#### 脉冲放电测试环

测试时间是9320点的话，事实上的放电点是5040个点，从100%放到了10%附近

若放电速度是0.6C，理论上放6000秒才结束了

所以一个点是1秒



CSO3.21 001056

![image-20240321001258666](C:/Users/xtx/AppData/Roaming/Typora/typora-user-images/image-20240321001258666.png)



CSO3.21 213825

![image-20240321213759476](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403212137646.png)

CSO3.22 163303

![image-20240322163311568](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403221633763.png)



PSO3.21 120256

![image-20240321120401905](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403211204016.png)



PSO3.21 144156

![image-20240321144212202](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403211442314.png)









V4.1参数组测试如下

CSO:

```
p=[6.17522618702119e-10	3.12466329331946e-09	5.25869155202925e-11	1.00000000000000e-20	0.0346465282253065];
```

PSO:

```
p=[1.00000000000000e-20	1.51471043038934e-08	1.00000000000000e-20	5.41946854122098e-06	0.127019419855469];
```

### 添加随机性后

CSO 3.23 131122

![image-20240323134625918](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403231346134.png)

PSO 3.23 162641

0.0117



### 扩大范围后

CSO 3.24 015925

![image-20240325101821220](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403251018408.png)



PSO 3.25 101831

![image-20240325101851287](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403251018386.png)

PSO 3.25 133221

![image-20240325133229610](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403251332753.png)

CSO 3.25 222401

![image-20240325222430465](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403252224636.png)

CSO 3.26 144640

![image-20240326144719686](C:/Users/xtx/AppData/Roaming/Typora/typora-user-images/image-20240326144719686.png)

PSO 3.26 220803

0.14



PSO 3.27 154425

![image-20240327154456204](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403271544383.png)



V5.0参数组测试如下

CSO: CSO 3.24 015925

```
p=[0.000133305194045661	0.0204098705919480	0.0138905152069723	0.0208361167405840	0.104542695571693];
```

PSO: PSO 3.25 101831

```
p=[2.60208170098127e-05	0.000550740534807987	0.0690310695661876	0.0851641796775208	0.354658558339632];
```

UKF:

```
p=[1e-4	1e-4	1e-4	0.1	 0.4];
```



### 修复了MAE算法后

v5.1

CSO 20240328 085924

![image-20240328090000188](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403280900174.png)



CSO 20240328 090123

![image-20240328085910083](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403280859316.png)



PSO 20240328 152857

![image-20240328152916312](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403281529449.png)

PSO 20240328 152955

![image-20240328153038840](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403281530925.png)

V5.1参数组测试如下

CSO: CSO 3.28 090123

```
p=[2.52557369035523e-10	1.341200000000000e-10	1.13994453179130e-09	0.000371345033648237	0.581820494060454];
```

PSO: PSO 3.28 152857

```
p=[4.94232271014206e-05	0.0940340914718316	0.0223822600607477	0.0328746791828967	0.289184524884599];
```

UKF:

```
p=[1e-5	1e-5	1e-5	1e-5	0.04];
```



V5.2，主要修正了PSO相关的问题

CSO 3.29 133618

![image-20240329133642543](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403291336759.png)



PSO 3.30 015758

0.02左右



CSO 3.30 144747

![image-20240330144913985](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403301449243.png)

PSO 3.30 145220

![image-20240330145242331](C:/Users/xtx/AppData/Roaming/Typora/typora-user-images/image-20240330145242331.png)



V5.2参数组测试如下

CSO: CSO 3.30 144747

```
p=[1.95685350623899e-06	7.25574318948047e-07	0.00398137287104863	3.84494210125345e-05	0.700665840465669];
```

PSO: PSO 3.30 145220

```
p=[5.89572511400158e-06	4.30941683083204e-07	0.0537911196582685	1.89387473518256e-06	0.491959528684762];
```

UKF:

```
p=[1e-5	1e-5	1e-5	1e-5	0.5];
```



GWO 2024.3.30 200741

![image-20240330201352177](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403302013410.png)

GWO 2024.3.30 212235

![image-20240330212306380](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403302123512.png)

WOA 2024.3.30 231639

![image-20240330231645367](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403302316536.png)





CSO: CSO 3.30 144747

```
p=[1.95685350623899e-06	7.25574318948047e-07	0.00398137287104863	3.84494210125345e-05	0.700665840465669];
```

PSO: PSO 3.30 145220

```
p=[5.89572511400158e-06	4.30941683083204e-07	0.0537911196582685	1.89387473518256e-06	0.491959528684762];
```

GWO 2024.3.30 212235

```
p=[1.87819962065332e-06	3.87586509203576e-06	0.00410852758600619	0.000234687550316654	0.102866883044527];
```

WOA 2024.3.30 231639

```
p=[0.000702535431159092	0.000315082096160500	0.00367915136904881	0.000112207500467970	0.0477377027245451];
```

UKF:

```
p=[1e-5	1e-5	1e-5	1e-5	0.5];
```



### CSO6代

CSO 3.31 010451

![image-20240331010902911](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202403310109041.png)



CSO6.1代

CSO 4.3 150115 7900x

![image-20240403150102610](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202404031501885.png)



CSO6.2 4.3 194315 7900x

![image-20240403194407419](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202404031944610.png)

CSO6.3 4.4 001421

![image-20240404001756796](http://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/202404040017940.png)
